CREATE TABLE insurance_policy (
  policy_id STRING(36) NOT NULL,
  policy_number STRING(36) NOT NULL,
  policy_type STRING(64) NOT NULL,
  policy_start_date DATE NOT NULL,
  policy_end_date DATE NOT NULL,
  premium NUMERIC NOT NULL,
  deductible NUMERIC NOT NULL,
)PRIMARY KEY (policy_id);

CREATE TABLE policyholder (
  policyholder_id STRING(36) NOT NULL,
  first_name STRING(64) NOT NULL,
  last_name STRING(64) NOT NULL,
  date_of_birth DATE NOT NULL,
  email STRING(64) NOT NULL,
  phone_number STRING(36) NOT NULL,
)PRIMARY KEY (policyholder_id);

CREATE TABLE address (
  address_id STRING(36) NOT NULL,
  street STRING(64) NOT NULL,
  city STRING(64) NOT NULL,
  state STRING(16) NOT NULL,
  zip_code STRING(36) NOT NULL,
)PRIMARY KEY (address_id);

CREATE TABLE policyholder_address (
  policyholder_id STRING(36) NOT NULL,
  address_id STRING(36) NOT NULL,
  CONSTRAINT Fk_PolicyHolder FOREIGN KEY (policyholder_id) REFERENCES policyholder (policyholder_id),
  CONSTRAINT Fk_Address FOREIGN KEY (address_id) REFERENCES address (address_id)
)PRIMARY KEY (policyholder_id, address_id);

CREATE TABLE policyholder_policy (
  policyholder_id STRING(36) NOT NULL,
  policy_id STRING(36) NOT NULL,
  CONSTRAINT Fk_PolicyHolder FOREIGN KEY (policyholder_id) REFERENCES policyholder (policyholder_id),
  CONSTRAINT Fk_Policy FOREIGN KEY (policy_id) REFERENCES address (policy_id)
)PRIMARY KEY (policyholder_id, policy_id);

CREATE TABLE claim (
  claim_id STRING(36) NOT NULL,
  policy_id STRING(36) NOT NULL,
  claim_date DATE NOT NULL,
  claim_description STRING(MAX) NOT NULL,
  claim_amount NUMERIC NOT NULL,
  claim_status STRING(36) NOT NULL,
  CONSTRAINT Fk_PolicyClaim FOREIGN KEY (policy_id) REFERENCES insurance_policy (policy_id)
)PRIMARY KEY (claim_id);


-- DECLARE current_date DATE;
-- SET current_date = CURRENT_DATE();

-- INSERT INTO insurance_policy (policy_id, policy_number, policy_type, policy_start_date, policy_end_date, premium, deductible)
-- VALUES
--   ('550e8400-e29b-11d4-a716-446655440000','9000000000', 'Auto', CURRENT_DATE, CURRENT_DATE + 3 MONTH, 800, 500),
--   ('e4050c29-a954-407b-80a3-542926474b4e','9000000001', 'Auto', CURRENT_DATE, CURRENT_DATE + 6 MONTH, 900, 500),
--   ('395e20fb-0906-4d23-9c5d-b73371c38493','9000000002', 'Auto', CURRENT_DATE, CURRENT_DATE + 9 MONTH, 1000, 500),
--   ('165a3569-479a-4ff5-a209-95b251622cf0','9000000003', 'Auto', CURRENT_DATE, CURRENT_DATE + 1 YEAR, 1200, 600),
--   ('45338671-f5f5-4627-91bd-b258e04e6cb2','9000000004', 'Auto', CURRENT_DATE, CURRENT_DATE + 2 YEAR, 1800, 800),
--   ('348f6528-49b4-424a-a71d-4b330c1f4e99','9000000005', 'Home', CURRENT_DATE, CURRENT_DATE + 3 MONTH, 400, 100),
--   ('b4f1d612-0a00-4a8f-8002-67c5e3e7c750','9000000006', 'Home', CURRENT_DATE, CURRENT_DATE + 6 MONTH, 600, 200),
--   ('11794984-8346-440c-89c5-6bdc58f154f6','9000000007', 'Home', CURRENT_DATE, CURRENT_DATE + 9 MONTH, 700, 300),
--   ('105db177-a2d8-4c36-8573-d7b2296e4a1e','9000000008', 'Home', CURRENT_DATE, CURRENT_DATE + 1 YEAR, 1000, 500),
--   ('98020062-b148-4c01-92f9-3a344007f71f','9000000009', 'Home', CURRENT_DATE, CURRENT_DATE + 2 YEAR, 1400, 500),
--   ('d80f8182-4073-406f-873b-f47686805c5e','9000000010', 'Home', CURRENT_DATE, CURRENT_DATE + 3 YEAR, 2200, 500),
--   ('91726150-624c-4c86-9972-056409f0b42d','9000000011', 'Home', CURRENT_DATE, CURRENT_DATE + 4 YEAR, 3200, 500),
--   ('b9885d23-4503-4386-8e6e-1178a9e3329d','9000000012', 'Home', CURRENT_DATE, CURRENT_DATE + 5 YEAR, 4500, 500),
--   ('93977330-398c-42d8-b6b0-1e89435681e0','9000000013', 'Home', CURRENT_DATE, CURRENT_DATE + 6 YEAR, 5600, 500),
--   ('d5213f1f-d99a-4284-8340-4c1f07731783','9000000014', 'Medical', CURRENT_DATE, CURRENT_DATE + 6 MONTH, 900, 100),
--   ('965c7901-6566-47b9-8306-2b0c576e5c3b','9000000015', 'Medical', CURRENT_DATE, CURRENT_DATE + 9 MONTH, 1200, 200),
--   ('b41b19ad-fa01-4b25-905e-47a02e8f0317','9000000016', 'Medical', CURRENT_DATE, CURRENT_DATE + 1 YEAR, 1500, 300),
--   ('3908887b-6b2d-4509-9b61-483706c4d2a5','9000000017', 'Medical', CURRENT_DATE, CURRENT_DATE + 2 YEAR, 2000, 400),
--   ('08769c42-581d-4d73-8006-2a6053055c26','9000000018', 'Medical', CURRENT_DATE, CURRENT_DATE + 3 YEAR, 2500, 500),
--   ('21665343-1779-4f06-811e-f76e891f0117','9000000019', 'Medical', CURRENT_DATE, CURRENT_DATE + 4 YEAR, 3000, 600),
--   ('45308253-383e-4648-8d8c-8193f2f911b0','9000000020', 'Car Rental', CURRENT_DATE, CURRENT_DATE + 1 DAYS, 50, 0),
--   ('32641399-a405-4857-b415-b098649538d0','9000000021', 'Car Rental', CURRENT_DATE, CURRENT_DATE + 2 DAYS, 50, 10),
--   ('94880668-6215-449e-9343-514393665595','9000000022', 'Car Rental', CURRENT_DATE, CURRENT_DATE + 3 DAYS, 50, 20),
--   ('d9764158-1498-4984-9e00-d438a5366c3c','9000000023', 'Car Rental', CURRENT_DATE, CURRENT_DATE + 4 DAYS, 100, 0),
--   ('c309643a-487c-46a4-8150-e92518c75145','9000000024', 'Car Rental', CURRENT_DATE, CURRENT_DATE + 5 DAYS, 100, 10),
--   ('b1147a92-5135-480f-b56e-54e27f89e4d5','9000000025', 'Car Rental', CURRENT_DATE, CURRENT_DATE + 6 DAYS, 100, 20),
--   ('63455e6b-6526-4b11-9522-c6928043518b','9000000026', 'Car Rental', CURRENT_DATE, CURRENT_DATE + 1 WEEK, 120, 0),
--   ('e0258644-2874-434c-a73a-67c848888e31','9000000027', 'Car Rental', CURRENT_DATE, CURRENT_DATE + 2 WEEK, 150, 10),
--   ('28f214a9-f314-4b48-8337-b0a6017d02e6','9000000028', 'Car Rental', CURRENT_DATE, CURRENT_DATE + 3 WEEK, 250, 10),
--   ('82726051-4367-4502-87e0-d5911917462a','9000000029', 'Car Rental', CURRENT_DATE, CURRENT_DATE + 1 MONTH, 320, 10),
--   ('37713982-6235-4517-ac71-26512645a2ee','9000000030', 'Travel', CURRENT_DATE, CURRENT_DATE + 1 WEEK, 200, 100),
--   ('a5a61d49-f63e-4802-88b6-0b064f676b89','9000000031', 'Travel', CURRENT_DATE, CURRENT_DATE + 2 WEEK, 300, 125),
--   ('498f7483-5482-41ad-839e-43994d76917e','9000000032', 'Travel', CURRENT_DATE, CURRENT_DATE + 3 WEEK, 400, 150),
--   ('35633888-7485-4728-8327-006238714f4c','9000000033', 'Travel', CURRENT_DATE, CURRENT_DATE + 4 WEEK, 450, 150),
--   ('59d0454b-b637-489b-8503-66e6133f6920','9000000034', 'Travel', CURRENT_DATE, CURRENT_DATE + 1 MONTH, 500, 150),
--   ('1b510497-249a-4517-b89a-a58391153c41','9000000035', 'Travel', CURRENT_DATE, CURRENT_DATE + 2 MONTH, 700, 200),
--   ('c5587604-7129-4726-a333-308c3366121e','9000000036', 'Travel', CURRENT_DATE, CURRENT_DATE + 3 MONTH, 900, 200),
--   ('75472307-252f-4518-8736-844524c77857','9000000037', 'Travel', CURRENT_DATE, CURRENT_DATE + 6 MONTH, 1100, 200),
--   ('3885e71d-9664-4572-9786-05da901587a4','9000000038', 'Travel', CURRENT_DATE, CURRENT_DATE + 1 YEAR, 1500, 200),
--   ('55e5a69d-6082-4189-8643-e0e49236780d','9000000039', 'Travel', CURRENT_DATE, CURRENT_DATE + 2 YEAR, 2000, 200);
